        -:    0:Source:/home/pez/workspace/bmrk/src/lib/PageParser.cpp
        -:    0:Graph:../../build/src/lib/CMakeFiles/bmrk-static.dir/PageParser.cpp.gcno
        -:    0:Data:../../build/src/lib/CMakeFiles/bmrk-static.dir/PageParser.cpp.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:#include "PageParser.hpp"
        -:    2:
        -:    3:#include <gumbo-query/Node.h>
        -:    4:#include <gumbo-query/Document.h>
        -:    5:
        -:    6:namespace bmrk {
        -:    7:
        9:    8:PageParser::PageParser(const String& html) : doc_{new CDocument} {
        4:    9:  if (html.empty()) {
        6:   10:    throw Error{"Empty document"};
        -:   11:  }
        9:   12:  doc_->parse(html.c_str());
        5:   13:}
        -:   14:
        -:   15:String PageParser::getTitle() const {
       13:   16:  auto&& node = doc_->find("head title").nodeAt(0);
        6:   17:  if (!node.valid()) {
        6:   18:    throw Error{"Cannot parse title"};
        -:   19:  }
        2:   20:  return node.text();
        4:   21:}
        -:   22:
        -:   23:String PageParser::getNotes() const {
        -:   24:  // FIXME select by attribute doesn't work
    #####:   25:  auto&& node = doc_->find("head meta[name='description']").nodeAt(0);
    #####:   26:  return node.valid() ? node.text() : "";
    #####:   27:}
        -:   28:} /* bmrk  */
